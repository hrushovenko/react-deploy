(this["webpackJsonpstar-wars-api"]=this["webpackJsonpstar-wars-api"]||[]).push([[0],{31:function(e,t,a){e.exports=a(62)},36:function(e,t,a){},60:function(e,t,a){e.exports=a.p+"static/media/star.45dd5470.png"},61:function(e,t,a){e.exports=a.p+"static/media/starEmpty.bbacfca0.png"},62:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(26),o=a.n(c),s=(a(36),a(8)),i=a(9),m=a(1),u=Object(r.createContext)(),E=function(){return l.a.createElement("div",{className:"text-center"},l.a.createElement("div",{className:"spinner-border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")))},f=a(27),h=function(){var e=Object(r.useContext)(u),t=e.filterSelection,a=e.handleChange,n=e.male,c=e.female,o=e.all,s=e.robot,i=e.search;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"input-group"},l.a.createElement("button",{name:"all",className:"btn btn-filter ".concat(o?"active":""),onClick:t},"Show all"),l.a.createElement("button",{name:"male",className:"btn btn-filter ".concat(n?"active":""),onClick:t},"Male"),l.a.createElement("button",{name:"female",className:"btn btn-filter ".concat(c?"active":""),onClick:t},"Female"),l.a.createElement("button",{name:"robot",className:"btn btn-filter ".concat(s?"active":""),onClick:t},"Robot")),l.a.createElement("input",{type:"text",id:"myInput",value:i,onChange:a,placeholder:"Search for names..."}))},p=function(){var e=Object(r.useContext)(u),t=e.loading,a=e.heroes,n=e.fetchHeroes,c=e.fetchMoreHeroes,o=e.hasMore,i=e.male,p=e.female,d=e.all,b=e.robot,v=e.search;Object(r.useEffect)((function(){n()}),[]);var O=Object.keys(a).map((function(e){return Object(m.a)(Object(m.a)({},a[e]),{},{id:e})})),g="";d||(i?g="male":p?g="female":b&&(g="n/a"),O=O.filter((function(e){return e.gender===g}))),v.length>0&&(O=O.filter((function(e){return-1!==e.name.toLowerCase().indexOf(v.toLowerCase())?e:null})));var j=!0;return O.length<1&&(j=!1),l.a.createElement(r.Fragment,null,l.a.createElement("h1",null,"Heroes List:"),l.a.createElement("hr",null),l.a.createElement(h,null),l.a.createElement("ul",{className:"list-group"},t?l.a.createElement(E,null):l.a.createElement("div",null,l.a.createElement(f.a,{dataLength:a.length,next:c,hasMore:o,loader:j?l.a.createElement(E,null):l.a.createElement("div",{className:"alert alert-warning",role:"alert"},"No results...")},O.map((function(e){return l.a.createElement("li",{className:"list-group-item person",key:e.id},e.name,l.a.createElement(s.b,{className:"btn btn-info btn-sm",to:"/details?".concat(e.url.split("/")[5]),exact:!0},"Hero Details"))}))))))},d=function(){var e=Object(m.a)({},localStorage),t=Object.entries(e);return l.a.createElement(r.Fragment,null,l.a.createElement("h1",null,"Favourites List"),l.a.createElement("hr",null),t.map((function(e){return l.a.createElement("li",{className:"list-group-item person",key:e[0]},e[1],l.a.createElement(s.b,{className:"btn btn-info btn-sm",to:"/details?".concat(e[0]),exact:!0},"Hero Details"))})))},b=function(){return l.a.createElement("nav",{className:"navbar navbar-dark navbar-expand-lg bg-dark"},l.a.createElement("div",{className:"navbar-brand"},"Star Wars App"),l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link",to:"/",exact:!0},"People List")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link",to:"/favourites"},"Favourites"))))},v=a(6),O=a.n(v),g=a(10),j=a(30),y=a(11),x=a.n(y),F=a(5),H=(n={},Object(F.a)(n,"SHOW_LOADER",(function(e){return Object(m.a)(Object(m.a)({},e),{},{loading:!0})})),Object(F.a)(n,"FAVOURITE",(function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{hero:Object(m.a)(Object(m.a)({},e.hero),{},{isFavourite:a})})})),Object(F.a)(n,"FETCH_HEROES",(function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{heroes:a.results,next:a.next,loading:!1})})),Object(F.a)(n,"FETCH_HERO",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{hero:t.payload,homeUrl:t.payload.homeworld,filmsUrl:t.payload.films,loading:!1})})),Object(F.a)(n,"FETCH_FILMS",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{films:t.payload,loading:!1})})),Object(F.a)(n,"FETCH_HOME_WORLD",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{homeWorld:t.payload,loading:!1})})),Object(F.a)(n,"FETCH_MORE_HEROES",(function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{heroes:e.heroes.concat(a.data.results),next:a.data.next,loading:!1,hasMore:a.hasMore})})),Object(F.a)(n,"FILTER",(function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{male:a.male,female:a.female,robot:a.robot,all:a.all})})),Object(F.a)(n,"SEARCH",(function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{search:a})})),Object(F.a)(n,"DEFAULT",(function(e){return e})),n),w=function(e,t){return(H[t.type]||H.DEFAULT)(e,t)},k=function(e){var t=e.children,a=Object(r.useReducer)(w,{heroes:[],favouritesHeroes:[],hero:[],homeWorld:[],homeUrl:"",filmsUrl:[],films:[],next:"",isFavourite:!1,loading:!1,hasMore:!0,male:!1,female:!1,robot:!1,all:!0,search:"",location:""}),n=Object(j.a)(a,2),c=n[0],o=n[1],s=function(){return o({type:"SHOW_LOADER"})},i=function(){var e=Object(g.a)(O.a.mark((function e(){var t,a,n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"https://swapi.dev/api/people/?page=1",s(),e.next=4,x.a.get(t);case 4:a=e.sent,n=a.data,setTimeout((function(){o({type:"FETCH_HEROES",payload:n})}),300);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(g.a)(O.a.mark((function e(t){var a,n,r,l,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),a="http://swapi.dev/api/people/".concat(t,"/"),e.next=4,x.a.get(a);case 4:n=e.sent,r=n.data,l=!1,t in localStorage&&(l=!0),c={isFavourite:l},i=Object.assign(r,c),o({type:"FETCH_HERO",payload:i});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===c.homeUrl.length){e.next=7;break}return s(),e.next=4,x.a.get(c.homeUrl);case 4:t=e.sent,a=t.data,o({type:"FETCH_HOME_WORLD",payload:a});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),a=[],e.next=4,t.forEach(function(){var e=Object(g.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(t);case 2:r=e.sent,a=a.concat(r.data),n===c.filmsUrl.length-1&&o({type:"FETCH_FILMS",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(g.a)(O.a.mark((function e(){var t,a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(c.next));case 2:t=e.sent,a=!0,null===t.data.next&&(a=!1),n={data:t.data,hasMore:a},setTimeout((function(){o({type:"FETCH_MORE_HEROES",payload:n})}),500);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(u.Provider,{value:{showLoader:s,fetchHeroes:i,fetchHero:m,fetchMoreHeroes:h,fetchHomeWorld:E,fetchFilms:f,filterSelection:function(e){var t;switch(e.preventDefault(),e.target.name){case"male":t={male:!0,female:!1,robot:!1,all:!1};break;case"female":t={male:!1,female:!0,robot:!1,all:!1};break;case"robot":t={male:!1,female:!1,robot:!0,all:!1};break;case"all":t={male:!1,female:!1,robot:!1,all:!0}}o({type:"FILTER",payload:t})},handleLS:function(e){var t=!1;null===localStorage.getItem(e,c.hero.name)?(localStorage.setItem(e,c.hero.name),t=!0):(localStorage.removeItem(e),t=!1),o({type:"FAVOURITE",payload:t})},handleChange:function(e){var t=e.target.value;o({type:"SEARCH",payload:t})},loading:c.loading,heroes:c.heroes,hero:c.hero,hasMore:c.hasMore,male:c.male,female:c.female,robot:c.robot,all:c.all,search:c.search,homeWorld:c.homeWorld,films:c.films,filmsUrl:c.filmsUrl,homeUrl:c.homeUrl,location:c.location,isFovourite:c.isFavourite}},t)},C=function(){var e=Object(r.useContext)(u),t=e.loading,a=e.homeWorld,n=e.homeUrl,c=e.fetchHomeWorld;return Object(r.useEffect)((function(){c()}),[n]),l.a.createElement(r.Fragment,null,l.a.createElement("h4",null,"Planet:"),l.a.createElement("hr",null),t?l.a.createElement(E,null):l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Home World:"),l.a.createElement("th",{scope:"col"},"Population:"),l.a.createElement("th",{scope:"col"},"Climate:"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,a.name),l.a.createElement("td",null,a.population),l.a.createElement("td",null,a.climate)))))},N=function(){var e=Object(r.useContext)(u),t=e.loading,a=e.films,n=e.filmsUrl,c=e.fetchFilms;Object(r.useEffect)((function(){c(n)}),[n]);var o=Object.keys(a).map((function(e){return Object(m.a)(Object(m.a)({},a[e]),{},{id:e})}));return l.a.createElement(r.Fragment,null,l.a.createElement("h4",null,"List of films:"),l.a.createElement("hr",null),t?l.a.createElement(E,null):l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"N"),l.a.createElement("th",{scope:"col"},"Film title:"),l.a.createElement("th",{scope:"col"},"Release date:"))),o.map((function(e){return l.a.createElement("tbody",{key:e.id+1},l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},(parseInt(e.id)+1).toString()),l.a.createElement("td",null,e.title),l.a.createElement("td",null,e.release_date)))}))))},S=function(){var e=Object(r.useContext)(u),t=e.fetchHero,n=e.handleLS,c=e.hero,o=parseInt(window.location.search.replace("?",""));return Object(r.useEffect)((function(){t(o)}),[]),l.a.createElement(r.Fragment,null,l.a.createElement("h1",null,"Hero details:"),l.a.createElement("hr",null),l.a.createElement("table",{className:"table table-bordered table-dark"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Name"),l.a.createElement("th",{scope:"col"},"Favourite"),l.a.createElement("th",{scope:"col"},"Height"),l.a.createElement("th",{scope:"col"},"Mass"),l.a.createElement("th",{scope:"col"},"Haircolor"),l.a.createElement("th",{scope:"col"},"Skincolor"),l.a.createElement("th",{scope:"col"},"EyeColor"),l.a.createElement("th",{scope:"col"},"BirthYear"),l.a.createElement("th",{scope:"col"},"Gender"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},c.name),l.a.createElement("td",null,l.a.createElement("img",{className:"star",src:c.isFavourite?a(60):a(61),alt:"Favourite",width:"30",height:"30",onClick:function(){return n(o)}})),l.a.createElement("td",null,c.height," cm"),l.a.createElement("td",null,c.mass," kg"),l.a.createElement("td",null,c.hair_color),l.a.createElement("td",null,c.skin_color),l.a.createElement("td",null,c.eye_color),l.a.createElement("td",null,c.birth_year),l.a.createElement("td",null,c.gender)))),l.a.createElement(C,null),l.a.createElement(N,null))};var L=function(){return l.a.createElement(k,null,l.a.createElement(s.a,null,l.a.createElement(b,null),l.a.createElement("div",{className:"container pt-4"},l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/",exact:!0,component:p}),l.a.createElement(i.a,{path:"/favourites",exact:!0,component:d}),l.a.createElement(i.a,{path:"/details",exact:!0,component:S})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.8bf178d2.chunk.js.map